
<template name="commentsLatest">
  <div class="ui grid padded container">
    <div class="one colum row">
    </div>
    <div class="ui six wide centered container">
        <h1 class="ui header">Latest Comments:</h1>
        <div class="ui divider"></div>
        <div class="ui grid">
          {{> commentsList comments=commentsLatest}}
        </div>
  	 </div>
  </div>
</template>


<template name="commentsWithPostId">
  <div class="ui grid basic padded container segment">
    <div class="one colum row">
      <h1 class="ui header">Comments:</h1>
    </div>
    <div class="ui container">
       <div class="ui grid comment-block">
         {{#each commentsWithPostId postId}}
           {{> commentItem}}
         {{else}}
           <p>No comments yet</p>
         {{/each}}
         <div class="one column row">
           <div class="sixteen wide column">
             {{> commentInput}}
           </div>
         </div>
       </div>
  	 </div>
  </div>
</template>


<template name="commentsList">
  <div class="ui horizontal divider"></div>
  <div class="ui list">
    {{#each comments}}
      <div class="ui horizontal divider"></div>
      <div class="item">
        {{#with userWithId owner}}
          <img src="{{avatar}}" alt="avatar" class="ui avatar image">
          <div class="content">
            <div class="header"><a href="/{{username}}/">{{username}}</a> on
            {{#if isMotel ../postId}}
             {{#with motelWithId ../postId}}
               <a href="/{{usernameWithId owner}}/motel/{{_id}}">
                 <b><i>{{name}}</i></b>
               </a>
             {{/with}}
            {{else}}
             {{#with moduleWithId ../postId}}
               <a href="/{{usernameWithId owner}}/module/{{_id}}">
                 <b><i>{{name}}</i></b>
               </a>
             {{/with}}
            {{/if}}
            </div>
            <div class="description" style="padding-top:6px;">{{../text}}</div>
          </div>
        {{/with}}

      </div>
    {{/each}}
  </div>
</template>




<template name="commentItemBlank">
  <div class="two column row">
    <div class="four wide left floated column">
      <div class="row">
        {{#with userWithId owner}}
          <img src="{{avatar}}" alt="avatar" class="ui avatar image">
          <b><a href="/{{username}}/">{{username}}</a></b>
        {{/with}}
        <i class="ui mini label">{{niceDateAgo date_created}}</i>
      </div>
      <div class="row">
        <i class="ui mini label">Ratings: {{ratingsCountWithCommentId _id}}</i>
        {{#with ratingOfCommentWithId _id}}
          <i class="ui mini {{ratingColorWithRating this}} circular label">{{this}}</i>
        {{else}}
          <i class="ui mini grey circular label">0</i>
        {{/with}}
      </div>
    </div>
    <div class="twelve wide right floated column">
      <div class="ui raised segment">
        {{text}}
      </div>

    </div>
  </div>

  <!-- {{date_created}}<br> -->
  <!-- {{date_edited}}<br> -->
  <!-- {{owner}}<br> -->
</template>

<template name="commentItemSimple">
  <div class="one column row">
    <div class="left floated column">
      {{#with userWithId owner}}
        <img src="{{avatar}}" alt="avatar" class="ui avatar image">
        <b><a href="/{{username}}/">{{username}}</a></b>
      {{/with}}
      <i class="ui mini label">{{niceDateAgo date_created}}</i>
      <i class="ui mini label">Ratings: {{ratingsCountWithCommentId _id}}</i>
      <i class="gray minus icon hover rate-remove"></i>
      <i class="green arrow up icon hover rate-up"></i>
      <i class="red arrow down hover icon rate-down"></i>
      {{#with ratingOfCommentWithId _id}}
        <i class="ui mini {{ratingColorWithRating this}} inverted label">{{this}}</i>
      {{else}}
        <i class="ui mini grey label">0</i>
      {{/with}}
    </div>
    <div class="ui raised segment">
      {{text}}
    </div>
  </div>
  <!-- {{date_created}}<br> -->
  <!-- {{date_edited}}<br> -->
  <!-- {{owner}}<br> -->
</template>

<template name="commentItem">
  <div class="one column row">
    <div style="width:40px;">
      <div class="ui row" style="text-align:center;">
        <i class="large arrow up icon hover rate-up"></i>
      </div>
      <div class="ui row rate-number rate-remove">
        {{#with ratingOfCommentWithId _id}}
          {{this}}
        {{else}}
          0
        {{/with}}
      </div>
      <div class="ui row" style="text-align:center;">
        <i class="large arrow down icon hover rate-down"></i>
      </div>
    </div>
    <div class="ui column" style="margin-right:-40px;">
      <div class="ui row">
        <b>{{usernameWithId owner}}</b>
        <em class="comment-style-time">{{niceDateAgo date_created}}</em>
      </div>
      <div class="ui row">
        {{#each textBreakSplits text}}
          {{this}}<br/>
        {{/each}}
      </div>
      <div class="ui right aligned comment-style-small comment-footer row">
        <!-- <i class="">Ratings: {{ratingsCountWithCommentId _id}}</i> -->
        <a href class="comment-reply">reply</a>
        <a href class="comment-style-time flag-comment">report</a>
      </div>
      <div class="ui divider">

      </div>
    </div>
  </div>
  <!-- {{date_created}}<br> -->
  <!-- {{date_edited}}<br> -->
  <!-- {{owner}}<br> -->
</template>


<template name="semanticComments">

  <div class="ui basic modal comment">
    <div class="content">
      <div class="ui raised inverted segment header">
        Reply
      </div>
      <div class="ui raised segment">
        {{#with sessionCommentReplyTo}}
          {{> semanticCommentBasic}}
        {{/with}}
      </div>

      <div class="ui raised segment">
        <form class="ui reply form">
          <div class="field">
            <textarea class="commentReplyTextarea"></textarea>
          </div>
        </form>
      </div>
    </div>
    <div class="actions">
      <div class="ui red basic cancel inverted button">
        Close
      </div>
      <div class="ui green ok inverted button">
        <i class="checkmark icon"></i>
        Reply
      </div>
    </div>
  </div>

  <div class="ui threaded comments">
    <h3 class="ui dividing header">Comments</h3>

    {{#each comments}}
      {{> semanticComment}}
    {{/each}}

    <form class="ui reply form">
      <div class="field">
        <textarea></textarea>
      </div>
      <div class="ui blue labeled submit icon button">
        <i class="icon edit"></i> Add Comment
      </div>
    </form>

  </div>
</template>

<template name="semanticComment">
  <div class="comment">
    <a class="avatar">
      <img src="{{avatarWithId owner}}">
    </a>
    <div class="content">
      <a class="author">{{usernameWithId owner}}</a>
      <div class="metadata">
        <span class="date">{{niceDateAgo date_created}}</span>
      </div>
      <div class="text">
        {{#each textBreakSplits text}}
          {{this}}<br/>
        {{/each}}
      </div>
      <div class="actions">
        <a class="reply">Reply</a>
      </div>

    </div>
    {{#with commentsWithPostId _id}}
      <div class="comments">
        {{#each this}}
          {{> semanticComment}}
        {{/each}}
      </div>
    {{/with}}
  </div>
</template>

<template name="semanticCommentBasic">
  <div class="ui comments">
    <div class="comment">
      <a class="avatar">
        <img src="{{avatarWithId owner}}">
      </a>
      <div class="content">
        <a class="author">{{usernameWithId owner}}</a>
        <div class="metadata">
          <span class="date">{{niceDateAgo date_created}}</span>
        </div>
        <div class="text">
          {{#each textBreakSplits text}}
          {{this}}<br/>
          {{/each}}
        </div>
      </div>
    </div>
  </div>
</template>


<template name="commentInput">
  <div class="ui divider"></div>
  <div class="ui form">
    <div class="field">
      <label>Add your comment:</label>
      <textarea rows=2 class="commentText"></textarea>
      <br><br>
      <div class="ui submit button commentSend">Send Comment</div>
    </div>
  </div>
</template>
